<!doctype html>
<html lang="en">
  <head>
    <title>G-Grocery|Management:</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" charset="utf-8">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="{{ url_for('static', filename='fix.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    {% for font in fonts %}
      <link rel="stylesheet" href="{{ url_for('static', filename='fonts/poppins/' ~ font ~ '.ttf') }}">
    {% endfor %}
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
  </head>
  <body>
   <section class="vh-100">
      <div class="container-fluid" style="background-color: #f0f0f0;">
        <div class="row-sm-1">
          <div class="col-sm-12 text-black">
            <div class="d-flex align-items-center justify-content-between px-2 ms-xl-4" style="height: 70px;">
                <div class="d-flex align-items-center justify-content-between">
                    <span class="h3 fw-bold mb-0 px-2" style="order: 0;"><a href="/user={{usr}}" style="color: black; text-decoration: none;">G-Grocery</a></span>
                </div>
                <button class="btn btn-info btn-lg fw-bold" id="summary" type="button" style="background-color: #b1eb3d; outline: #b1eb3d; border-color: #b1eb3d; font-family: Cursive;" onfocus="this.style.boxShadow = '0 0 0 5px rgba(177, 235, 61, 0.150)'" onblur="this.style.boxShadow = '0 0 0 0 rgba(177, 235, 61, 0.075)'" onmouseover="this.style.backgroundColor = '#88eb3d'" onmouseout="this.style.backgroundColor = '#b1eb3d'">Summary <i class="fa-solid fa-chart-simple"></i></button>
                <div class="d-flex align-items-center">
                  <span class="h3 fw-bold mb-0 px-2" ><a href="/profile={{usr}}" style="color: black; text-decoration: none;">{{usr}}</a></span>
                  <button class="btn btn-info btn-lg" id="LogoutButton" type="button" style="background-color: #d3eb3d; outline: #d3eb3d; border-color: #d3eb3d; font-family: Cursive;" onfocus="this.style.boxShadow = '0 0 0 5px rgba(211, 235, 61, 0.150)'" onblur="this.style.boxShadow = '0 0 0 0 rgba(211, 235, 61, 0.075)'" onmouseover="this.style.backgroundColor = '#b1eb3d'" onmouseout="this.style.backgroundColor = '#d3eb3d'">Logout</button>
                </div>
            </div>
          </div>
        </div>
      </div>

      <div class="container-fluid" style="background-color: #d6d4d4;">
        <div class="row">
          <div class="col-sm-12 text-black">

            <div class="d-flex align-items-center justify-content-start px-2 ms-xl-4" style="height: 20px;">
                <span class="h7 mb-0 px-2 text-black " style="order: 0;"><a href="/user={{usr}}" style="color: black; text-decoration: none;">Home</a> </span>
                <span class="h7 mb-0 px-2 text-black pb-1">|</span>
                <span class="h7 mb-0 px-2 text-black"><a href="/user={{usr}}/Categories" style="color: black; text-decoration: none;">Categories</a> </span>
                <span class="h7 mb-0 px-2 text-black pb-1">|</span>
            </div>

          </div>
        </div>
      </div>


      <div class="container-fluid pt-2" style="width:100%;"> 
        <div class="row">
          <div class="col-sm-12 pb-2 fs-2" style="font-family: Cursive; font-weight: bolder;">
            <span>Categories:</span>
          </div>
        </div>
      </div>

      <div class="container-fluid pt-4" style="width:100%;"> 
        <!-- Category panels-->
        <div class="row">
          <div class="col-sm-12 pb-2">
    
              <div class="d-flex flex-wrap align-items-center justify-content-start px-4 ms-xl-4" id = 'Parent-class'>
                {% if category == None %}
                <div class="d-flex fs-2 align-items-center justify-content-center" style="height: 100%; width: 100%; font-family: Cursive; font-weight: lighter; font-style: italic;">
                  <span>No categories available.</span>                  
                </div>
                {% else %}
                  {% for panel in category %}
                  <div class = "d-flex px-5 pb-5" style="overflow: hidden; word-wrap: break-word;">
                    <div class="d-flex rounded-pill border border-dark align-items-center pt-4 px-4" style="height: 340px; width:240px; background-color: #dedede; flex-direction: column;">
                      <div class="d-flex align-items-center justify-content-center text-center pt-1 pb-1 fs-5" style="overflow: hidden; word-wrap: break-word; font-family: cursive; line-height: 1; max-height: 18%; max-width: 70%;height: 16%;">
                        <span><a href="/user={{usr}}/delete={{panel[1]}}" style="color: black; text-decoration: none;">{{panel[1]}}</a></span>
                      </div>
                      <div class="d-flex align-items-center justify-content-center text-center border border-dark mt-3 pt-1 pb-1 px-1 fs-5" style="overflow: hidden; word-wrap: break-word; font-family: cursive; background-color: white; max-height: 18%; width: 85%;">
                        <span>{{panel[2]}} products</span>
                      </div>
                      <div class="d-flex align-items-center justify-content-center text-center pt-4 pb-1">
                        <button class="btn btn-info btn-lg rounded-circle product-button" id="Add_prod_{{panel[1]}}" cat_Name="{{panel[1]}}" type="button" style="background-color: #d3eb3d; outline: #d3eb3d; border-color: #d3eb3d; font-family: Cursive;" onfocus="this.style.boxShadow = '0 0 0 5px rgba(211, 235, 61, 0.150)'" onblur="this.style.boxShadow = '0 0 0 0 rgba(211, 235, 61, 0.075)'" onmouseover="this.style.backgroundColor = '#b1eb3d'" onmouseout="this.style.backgroundColor = '#d3eb3d'"> <i class="fa-solid fa-plus product-button" cat_Name="{{panel[1]}}"></i></button>
                      </div>
                      <div class="d-flex align-items-center justify-content-center text-center pt-4 pb-2" style="width: 105%;">
                        <div class="d-flex px-2">
                          <button class="btn btn-info btn-lg rounded-3 edit-cat" id="edit_cat_{{panel[1]}}" type="button" style="background-color: #b1eb3d; outline: #b1eb3d; border-color: #b1eb3d; font-family: Cursive;" onfocus="this.style.boxShadow = '0 0 0 5px rgba(177, 235, 61, 0.150)'" onblur="this.style.boxShadow = '0 0 0 0 rgba(177, 235, 61, 0.075)'" onmouseover="this.style.backgroundColor = '#88eb3d'" onmouseout="this.style.backgroundColor = '#b1eb3d'"  cat_Name="{{panel[1]}}">Edit</button>
                        </div>
                        <button class="btn btn-info btn-lg rounded-3 fs-lg-5 del-cat" id="Del_cat_{{panel[1]}}" type="button" style="background-color: #fc4903; outline: #fc4903; border-color: #fc4903; font-family: Cursive;" onfocus="this.style.boxShadow = '0 0 0 5px rgba(255, 0, 0, 0.150)'" onblur="this.style.boxShadow = '0 0 0 0 rgba(255, 0, 0, 0.075)'" onmouseover="this.style.backgroundColor = '#ff6b30'" onmouseout="this.style.backgroundColor = '#fc4903'" cat_Name="{{panel[1]}}">Manage</button>
                      </div>
                    </div>
                  </div>
                  {% endfor %}    
                {% endif %}                         
              </div> 
          </div>
        </div>
      </div>

      <div class="position-fixed bottom-0 end-0 p-3" style="font-family: cursive; font-weight:normal;">
        <button class="btn btn-primary" style="background-color: #b1eb3d; outline: #d3eb3d; border-color: #d3eb3d; font-family: Cursive;" onfocus="this.style.boxShadow = '0 0 0 5px rgba(211, 235, 61, 0.150)'" onblur="this.style.boxShadow = '0 0 0 0 rgba(211, 235, 61, 0.075)'" onmouseover="this.style.backgroundColor = '#b1eb3d'" onmouseout="this.style.backgroundColor = '#d3eb3d'" id="Add_cat">Add category</button>
      </div>
      <!-- 
      <div class=" container-fluid row-sm-11 col-sm-12 d-flex align-items-center" style="background-color: #39a9e6;">
        <h1> NORMAL STORE PAGE</h1>
      </div>
      -->

      <script>
          var parentclass = document.getElementById('Parent-class')
          parentclass.addEventListener('click',function(event){

            if (event.target.classList.contains('product-button')){
              var cat_Name =  event.target.getAttribute('cat_Name')
              window.location.href = '/user={{usr}}/' + cat_Name + '/Add_Product';
            }
            else if (event.target.classList.contains('edit-cat')){
              var cat_Name =  event.target.getAttribute('cat_Name')
              window.location.href = '/user={{usr}}/edit_Category=' + cat_Name;
            }
            else if (event.target.classList.contains('del-cat')){
              var cat_Name =  event.target.getAttribute('cat_Name')
              window.location.href = '/user={{usr}}/delete=' + cat_Name;
            }
            });
      </script>


      <script>
        const button = document.getElementById('LogoutButton');
        button.addEventListener('click', function() {
            window.location.href = '/logout';
        });

        const add_Cats_button = document.getElementById('Add_cat');
        add_Cats_button.addEventListener('click', function(){
            window.location.href = '/user={{usr}}/Add_Category';
        });
    </script>
  </body>
</html>