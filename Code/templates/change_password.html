<!doctype html>
<html lang="en">
  <head>
    <title>{{usr}} | Profile - Change password</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" charset="utf-8">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="{{ url_for('static', filename='fix.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='button_style1.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='button_style2.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='button_style3.css') }}">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
  </head>
  <body>
   <section class="vh-100">
      <div class="container-fluid" style="background-color: #f0f0f0;">
        <div class="row-sm-1">
          <div class="col-sm-12 text-black">
            <div class="d-flex align-items-center justify-content-between px-2 ms-xl-4" style="height: 70px;">
                <div class="d-flex align-items-center justify-content-between">
                    <span class="h3 fw-bold mb-0 px-2" style="order: 0;"><a href="/user={{usr}}" style="color: black; text-decoration: none;">G-Grocery</a></span>
                </div>
                {% if admin == true %}
                  <button class="btn btn-lg  button-style1" id="management" type="button" style="font-family: cursive; font-weight:bold;">Store management <i class="fa-solid fa-book-open"></i></button>
                {% endif %}
                {% if admin == false %}
                  <button class="btn btn-lg  button-style1" id="cart" type="button" style="font-family: cursive; font-weight:bold;">Cart <i class="fa-solid fa-cart-shopping"></i></button>
                {% endif %}
                <div class="d-flex align-items-center">
                  <span class="h3 fw-bold mb-0 px-2" ><a href="/profile={{usr}}" style="color: black; text-decoration: none;">{{usr}}</a></span>
                  <button class="btn button-style2 fs-4" style="font-family:cursive; font-weight: normal;" id="LogoutButton" type="button">Logout</button>
                </div>
            </div>
          </div>
        </div>
      </div>

      <div class="container-fluid">
        <div class="row">
          <div class="col-sm-12 text-black">
            <div class="d-flex align-items-center justify-content-between px-2 ms-xl-4" style="height: 20px;">
            </div>
          </div>
        </div>
      </div>

      
      <div class="container-fluid">
        <div class="row">

          <!-- Menu Bar -->
          <div class="col-sm-2 text-black">

            <div class="d-flex px-1 pb-1 pt-1 ms-xl-xs-0 " style="height: 540px; border-right: 3px ridge #5c5c5c; flex-direction: column;">
              <!-- Add menu buttons here -->
              <div class="d-flex px-1 pb-1 pt-1 ms-xl-xs-0 " style="height: 8%; width: 100%; border-bottom: 2px solid #bfbdbd;">
               <span class=" fw-bold px-2 text-start fs-lg-5 fs-md-4 fs-sm-5 fs-xl-6"> Account Menu</span>
              </div>
              <div class="d-flex align-items-center justify-content-between pt-1 mt-1" style="height: 50px; width: 100%;">
                <button class="btn button-style2 fs-5" id="Acc_Det" type="button" style="height: 100%; width: 100%;font-family: cursive; font-weight:normal;">Account Details</button>
              </div>
              <div class="d-flex align-items-center justify-content-between pt-1" style="height: 50px; width: 100%;">
                <button class="btn button-style2 fs-5" id="chg_pwd" type="button" style="height: 100%; width: 100%;font-family: cursive; font-weight:normal;">Change Password</button>
              </div>
            </div>

          </div>

          <!-- Main plaque -->
          <div class="col-sm-8 text-black">
            <div class="d-flex align-items-end  px-1 pb-1 pt-1 ms-xl-xs-0 " style="height: 540px; flex-direction: column;">
                
                <!-- Title banner -->  <!-- background-color: #d4d4d4;-->
                <div class="d-flex align-items-start px-1 pb-1 pt-1 ms-xl-xs-0 " style="height: 8%; width: 100%; border-bottom: 2px solid #bfbdbd; flex-direction: column;">
                  <span class=" fw-bold px-2 text-start fs-lg-5 fs-md-4 fs-sm-5 fs-xl-6"> Change Password: <span class=" fs-lg-6 fs-md-5 fs-sm-5 fs-xl-7" style="color: red;">{{popup}}</span></span>
                </div>

                <!-- Content  -->  <!-- background-color: #f0f0f0; background-color: #e3e3e3;-->
                <div class="d-flex align-items-center justify-content-between ms-xl-xs-0 " style="height: 92%; width: 100%; ">

                  <div class="d-flex align-items-start px-1 pb-1 pt-1 ms-xl-xs-0 " style="height: 100%; width: 20%; border-right: 2px solid #bfbdbd; flex-direction: column; ">
                    <span class=" fw px-2 text-start fs-6 fs-sm-5  pt-2 pb-2 mt-2"> Old Password</span>
                    <span class=" fw px-2 text-start fs-6 fs-sm-5  pt-2 pb-2 mt-4"> New Password</span>
                    <span class=" fw px-2 text-start fs-6 fs-sm-5  pt-2 pb-2 mt-3"> Confirm New Password</span>
                  </div>
                  <div class="d-flex align-items-start px-1 pb-1 pt-1 ms-xl-xs-0 " style="height: 100%; width: 80%; flex-direction: column;">

                    <form method="post">
                      <div class="form-group fw px-2 text-start fs-6 fs-sm-5  pt-2 pb-2">
                        <input type="password" id="old_password" name="old_password" class="form-control form-control-lg" required />
                      </div>
                      <div class="form-group fw px-2 text-start fs-6 fs-sm-5  pt-2 pb-2 mt-2">
                        <input type="password" id="new_password" name="new_password" class="form-control form-control-lg" required />
                      </div>
                      <div class="form-group fw px-2 text-start fs-lg-6 pt-2 pb-2 mt-2">
                        <input type="password" id="Conf_new_password" name="Conf_new_password" class="form-control form-control-lg" required />
                      </div>

                      <button class="btn button-style2 mt-4" id="submit" type="Submit" style="height: 16%; width: 50%; text-align: center; vertical-align: middle; font-family: cursive; font-weight:bold;">Submit</button>
                      </form>
                  </div>

                </div>
            
            </div>
          </div>

          <!-- Image plaque -->
          <div class="col-sm-2 text-black">
            <div class="d-flex align-items-center justify-content-center px-2 ms-xl-xs-0 " id="userIcon" style="height: 240px; background-color: #f0f0f0;">
              <img src="{{ url_for('static', filename='{{usr}}.png') }}" alt="User Icon" class="icon-image">
            </div>
          </div>
        </div>
      </div>

      <script>
        const button = document.getElementById('LogoutButton');
        button.addEventListener('click', function() {
            window.location.href = '/logout';
        });
    </script>
    <script>
       const button1 = document.getElementById('Acc_Det');
        button1.addEventListener('click', function() {
            window.location.href = "/profile={{usr}}";
        });
    </script>
    <script>
        const button2 = document.getElementById('chg_pwd'); 
        button2.addEventListener('click', function() {
            window.location.href = "/profile={{usr}}/change_Password"; 
        });
    </script>
    <script>
      const button3 = document.getElementById('management');
        button3.addEventListener('click', function() {
            window.location.href = "/user={{usr}}/management"; 
        });
    </script>
    <script>
        const button4 = document.getElementById('cart');
        button4.addEventListener('click', function() {
            window.location.href = "/user={{usr}}/cart=Default"; 
        });
    </script>
    <script>
      document.addEventListener('DOMContentLoaded', function () {
      const usrImg = document.getElementById('userIcon');
      const image = usrImg.querySelector('img');

      image.addEventListener('error', function () {
        image.style.display = 'none'; 
        const icon = document.createElement('i');
        icon.className = 'fa-solid fa-user fa-lg';
        icon.style     = 'font-size: 120px;'
        usrImg.appendChild(icon);
       });
      });
    </script>

  </body>
</html>